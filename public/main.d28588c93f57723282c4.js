(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1125:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=f(a),s=f(n(192)),u=n(130),i=f(n(1144)),l=n(539),c=n(1146);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.isMe=function(e){return r.props.currentUser._id===e},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentDidMount",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.mounted=!0,e.next=3,s.default.get("/api/v1/groups").then(function(e){var n=e.data.groups||[];t.mounted&&(t.props.initGroups(n),t.props.setCurrentGroup(n[0]))},function(){t.setState({groups:[]})});case 3:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var s=t[a](o),u=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})});return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props.groups;return o.default.createElement("nav",{className:"col-md-3 bg-light sidebar"},o.default.createElement("div",{className:"sidebar-sticky"},o.default.createElement("div",{className:"pt-3 px-4"},o.default.createElement("h2",null,"Groups"),o.default.createElement(i.default,{currentUser:this.props.currentUser,isMe:this.isMe,groups:e,setCurrentGroup:this.props.setCurrentGroup}))))}}]),t}();t.default=(0,u.connect)(function(e){return{groups:e.groups,currentUser:e.auth.user}},{setCurrentGroup:l.setCurrentGroup,initGroups:c.initGroups})(d)},1144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=s(r),o=s(n(1145));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.groups,n=e.setCurrentGroup,s=e.isMe,u=e.currentUser;return a.default.createElement(r.Fragment,null,t.map(function(e,t){return a.default.createElement(o.default,{key:e._id||t,currentUser:u,isMe:s,group:e,setCurrentGroup:n})}))}},1145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){var t,n=e.group,r=e.setCurrentGroup,a=e.isMe,s=e.currentUser;return o.default.createElement("div",{className:"group"},function(e,t){var n=[];return t=(t=t.filter(function(r){if(r._id!==e._id&&-1===n.indexOf(r._id))return n.push(r._id),t})).slice(0,4),o.default.createElement("div",{className:"group-avatar group-avatar-"+(t.length<4?t.length+1:"n")},t.map(function(e,t){return o.default.createElement("img",{id:e._id,key:e._id||t,src:e.avatar})}))}(s,n.members),o.default.createElement("div",{className:"group-detail"},o.default.createElement("b",{className:"group-name",onClick:function(){return r(n)}},n.name),n.lastMessage&&o.default.createElement("div",null,o.default.createElement("div",{className:"group-last-message"},o.default.createElement("small",{style:{maxWidth:"80%",overflow:"hidden"}},a(n.lastMessage.user._id)&&"You: ",n.lastMessage.content.slice(0,30)),!a(n.lastMessage.user._id)&&o.default.createElement("img",{src:n.lastMessage.user.avatar,style:{height:"20px"}})),o.default.createElement("small",{style:{textAlign:"right",width:"100%",display:"inline-block"}},(t=n.lastMessage.createdTime,new Date(t).toLocaleTimeString()+" - "+new Date(t).toLocaleDateString())))))}},1146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initGroups=function(e){return{type:"GROUPS_INIT_GROUPS",groups:e}}},1147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(){return o.default.createElement("div",{className:"col-md-2 pt-3 px-4"})}},1148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),s=d(o),u=n(130),i=d(n(1149)),l=d(n(1174)),c=d(n(1177)),f=d(n(192)),p=n(539);function d(e){return e&&e.__esModule?e:{default:e}}function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var s=t[a](o),u=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=(0,i.default)("http://127.0.0.1:3000");g.on("newConnection",function(e){console.log(e)});var y=function(e){function t(){var e,n,a,o,s,u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return n=a=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={messages:null,message:{type:"text",content:null,file:null},openModal:{listMembers:!1},loading:{addNewMember:!1},newMemberIds:[],socket:null,isTyping:!1,openExtendTypeMessage:!1},a.actions={handleChangeNewMemberIds:function(e){return a.setState({newMemberIds:e})},handleChangeStatusModal:function(e){var t=a.state.openModal;t[e]=!t[e],a.setState({openModal:t})},handleChangeStateOpenExtendTypeMessage:function(){a.setState({openExtendTypeMessage:!a.state.openExtendTypeMessage})},handleAddNewMembers:(s=m(regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.group,n=a.state,r=n.loading,o=n.newMemberIds,r.addNewMember=!0,a.setState({loading:r}),e.next=6,f.default.put("/api/v1/groups/"+t._id,{newMemberIds:o.split(",")}).then(function(e){a.props.pushNotifycation("success","Thêm thành viên vào nhóm "+t.name+" thành công"),a.props.setCurrentGroup(e.data.group)},function(e){var n="Thêm thành viên vào nhóm "+t.name+" không thành công";e.response.data.message&&(n=e.response.data.message),a.props.pushNotifycation("success",n)});case 6:r.addNewMember=!1,a.setState({loading:r});case 8:case"end":return e.stop()}},e,u)})),function(){return s.apply(this,arguments)}),handleSendMessage:(o=m(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("message-content").blur(),t=r({},a.state.message),n={type:"text",content:null,file:null},a.setState({message:n}),f.default.post("/api/v1/messages",r({socketID:g.id,groupId:a.props.group._id},t)).then(function(){},function(e){var t=a.state.messages,n=a.props.currentUser;t.push({type:"text",content:"Gửi thất bại",error:!0,createdTime:Date.now(),user:n}),a.setState({messages:t}),console.log(e)});case 5:case"end":return e.stop()}},e,u)})),function(){return o.apply(this,arguments)}),handleOnTyping:function(){g.emit("typing")},handleUnTyping:function(){g.emit("unTyping")},handleChangeMessage:function(e,t){var n=a.state.message;n[e]=t,a.setState({message:n})}},a.isMe=function(e){return a.props.currentUser._id===e},h(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"scrollToBottomOfWrapperMessages",value:function(){var e=document.getElementById("wrapper-messages");e&&(e.scrollTop=e.scrollHeight)}},{key:"GetMessage",value:function(){var e=m(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({messages:null}),e.next=3,f.default.get("/api/v1/messages",{params:{group:t}}).then(function(e){var t=e.data.messages||[];n.setState({messages:t}),n.scrollToBottomOfWrapperMessages()},function(e){n.setState({messages:[]}),console.log(e.response.data)});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=this;g.on("typing",function(){document.getElementById("message-content").placeholder="",e.setState({isTyping:!0})}),g.on("unTyping",function(){e.setState({isTyping:!1})}),g.on("receiveNewMessage",function(t){var n=e.state.messages;n.push(t),e.setState({messages:n}),e.scrollToBottomOfWrapperMessages()})}},{key:"componentWillReceiveProps",value:function(e){e.group._id&&(this.GetMessage(e.group._id),g.emit("joinRoom",{groupId:e.group._id}),this.props.group._id&&e.group._id!==this.props.group._id&&g.emit("leaveRoom",{groupId:this.props.group._id}))}},{key:"render",value:function(){var e=this.props.group,t=this.state,n=t.openModal,r=t.loading,a=t.newMemberIds,o=t.messages,u=t.message,i=t.isTyping,f=t.openExtendTypeMessage;return s.default.createElement("main",{role:"main",className:"col-md-7 ml-sm-auto pt-3 px-4 border-right",style:{height:"calc(100vh - 48px)"}},s.default.createElement(l.default,{message:u,openExtendTypeMessage:f,isMe:this.isMe,isTyping:i,group:e,actions:this.actions,messages:o}),s.default.createElement(c.default,{group:e,actions:this.actions,isLoading:r.addNewMember,visible:n.listMembers,newMemberIds:a}))}}]),t}();t.default=(0,u.connect)(function(e){return{group:e.group,currentUser:e.auth.user}},{setCurrentGroup:p.setCurrentGroup})(y)},1171:function(e,t){},1174:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=s(r),o=s(n(1175));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.group,n=e.actions,s=e.messages,u=e.message,i=e.isTyping,l=e.isMe,c=e.openExtendTypeMessage;return a.default.createElement(r.Fragment,null,t._id&&a.default.createElement("div",{style:{position:"relative",width:"100%"}},a.default.createElement("div",{className:"info-group",style:{width:"100%",background:"#eee",position:"absolute",padding:"5px 10px",borderRadius:"3px"}},a.default.createElement("b",null,t.name),a.default.createElement("small",{onClick:function(){return n.handleChangeStatusModal("listMembers")},style:{cursor:"pointer"}}," ",t.members.length," thành viên"))),a.default.createElement("div",{style:{marginTop:"31px",display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"}},a.default.createElement("div",{id:"wrapper-messages",style:{flexGrow:"1",overflow:"auto",height:"100vh"}},a.default.createElement(o.default,{isMe:l,messages:s})),a.default.createElement("div",{className:"input-message",style:{marginBottom:"40px",position:"relative"}},i&&a.default.createElement("img",{className:"typing",src:"/images/typing.gif"}),a.default.createElement("textarea",{onKeyPress:function(e){"Enter"===e.key&&n.handleSendMessage()},value:u.content||"",id:"message-content",onFocus:n.handleOnTyping,onBlur:n.handleUnTyping,onChange:function(e){return n.handleChangeMessage("content",e.target.value)},className:"form-control",placeholder:"Nhập tin nhắn"}),a.default.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:"15px",display:"flex",alignItems:"center"}},a.default.createElement("div",{className:c?"extend-type-message is-extend":"extend-type-message"},c&&a.default.createElement(r.Fragment,null,a.default.createElement("i",{className:"fa fa-picture-o",style:{marginRight:"5px",cursor:"pointer"},"aria-hidden":"true"}),a.default.createElement("i",{className:"fa fa-video-camera",style:{cursor:"pointer"},"aria-hidden":"true"})),a.default.createElement("i",{onClick:n.handleChangeStateOpenExtendTypeMessage,style:{cursor:"pointer"},className:"fa fa-chevron-right","aria-hidden":"true"})),a.default.createElement("i",{style:{cursor:"pointer",marginLeft:"10px"},onClick:n.handleSendMessage,className:"fa fa-paper-plane-o","aria-hidden":"true"})))))}},1175:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=s(r),o=s(n(1176));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.messages,n=e.isMe;return a.default.createElement("div",{className:"list-messages",style:{marginTop:"10px"}},t&&a.default.createElement(r.Fragment,null,t.map(function(e,t){return a.default.createElement(o.default,{key:e._id||t,message:e,isMe:n})})))}},1176:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){var t,n=e.message,r=e.isMe;return o.default.createElement("div",{className:r(n.user._id)?"item-message me":"item-message"},!r(n.user._id)&&o.default.createElement("img",{src:n.user.avatar,style:{height:"30px",marginRight:"5px"}}),o.default.createElement("div",null,o.default.createElement("span",{className:n.error?"item-message-content error":"item-message-content"},n.content),!n.error&&o.default.createElement("small",{className:"item-message-created-time"},(t=n.createdTime,new Date(t).toLocaleTimeString()+" - "+new Date(t).toLocaleDateString()))))}},1177:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),o=(r=a)&&r.__esModule?r:{default:r},s=n(299);t.default=function(e){var t=e.group,n=e.visible,r=e.actions,u=e.isLoading,i=e.newMemberIds;return o.default.createElement(s.Modal,{title:"Thành viên nhóm "+(t._id&&t.name),visible:n,onCancel:function(){return r.handleChangeStatusModal("listMembers")},footer:[o.default.createElement(s.Button,{key:"back",onClick:function(){return r.handleChangeStatusModal("listMembers")}},"Trở lại"),o.default.createElement(s.Button,{key:"submit",type:"primary",loading:u,onClick:r.handleAddNewMembers},"Thêm vào nhóm")]},t._id&&o.default.createElement(a.Fragment,null,t.members.map(function(e,t){return o.default.createElement("div",{key:e._id||t,style:{display:"flex",marginBottom:"5px"}},o.default.createElement("img",{src:e.avatar,style:{width:"30px",height:"30px",marginRight:"5px"}}),o.default.createElement("b",null,e.username))})),o.default.createElement("textarea",{onChange:function(e){return r.handleChangeNewMemberIds(e.target.value)},value:i||"",className:"form-control",style:{marginTop:"15px"}}),o.default.createElement("small",null,"Nhập _id người dùng cách nhau bởi dấu , để thêm vào nhóm hoặc tạo nhóm mới",o.default.createElement("br",null),"VD: 123,321"))}},1178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=l(a),s=l(n(1179)),u=n(130),i=n(285);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.actions={handleLogout:function(){localStorage.removeItem("tokenJWT"),r.props.handleLogOut(),r.props.history.push("/auth/login")}},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this.props.auth;return o.default.createElement(s.default,{user:e?e.user:{},actions:this.actions})}}]),t}();t.default=(0,u.connect)(function(e){return{auth:e.auth}},{handleLogOut:i.handleLogOut})(f)},1179:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.actions,n=e.user;return o.default.createElement("nav",{className:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0"},o.default.createElement("a",{className:"navbar-brand col-sm-3 col-md-2 mr-0",href:"#"},"Mesage"),o.default.createElement("ul",{className:"navbar-nav ml-auto px-3",style:{display:"flex",flexDirection:"row"}},o.default.createElement("li",{className:"nav-item",style:{marginRight:"15px"}},o.default.createElement("span",{className:"nav-link"},o.default.createElement("img",{src:n.avatar,style:{height:"20px",marginRight:"5px"}})," ",n.username)),o.default.createElement("li",{className:"nav-item text-nowrap"},o.default.createElement("span",{style:{cursor:"pointer"},className:"nav-link",onClick:t.handleLogout},"Đăng xuất"))))}},1183:function(e,t){},1185:function(e,t){},1220:function(e,t){},1221:function(e,t){},1279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e?o.default.defaults.headers.common.Authorization="Bearer "+e:delete o.default.defaults.headers.common.Authorization};var r,a=n(192),o=(r=a)&&r.__esModule?r:{default:r}},1280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=i(a),s=n(592),u=i(n(1281));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){return o.default.createElement(a.Fragment,null,o.default.createElement(s.Switch,null,u.default.map(function(e,t){return o.default.createElement(s.Route,{key:t,exact:e.exact,path:e.path,component:e.component})})))}}]),t}();t.default=l},1281:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1282)),a=o(n(1284));function o(e){return e&&e.__esModule?e:{default:e}}var s=[{path:"/auth/login",exact:!0,component:r.default},{path:"/auth/signup",component:a.default}];t.default=s},1282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=f(a),s=f(n(192)),u=f(n(1283)),i=n(299);n(533);var l=n(130),c=n(285);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,n,r,a,o,u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,c=Array(l),f=0;f<l;f++)c[f]=arguments[f];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={auth:{email:null,password:null},loading:!1},r.pushNotifycation=function(e,t){i.notification[e]({message:t})},r.actions={handleChange:function(e){var t=e.target,n=t.id,a=t.value,o=r.state.auth;o[n]=a,r.setState({auth:o})},handleLogin:(a=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state.auth,r.setState({loading:!0}),e.next=4,s.default.post("/api/v1/auth/login",t).then(function(e){r.setState({loading:!1}),localStorage.tokenJWT=e.data.tokenJWT,r.props.setCurrentUser(e.data.tokenJWT),r.props.history.push("/")},function(e){var t="Đăng nhập không thành công";e.response.data.message&&(t=e.response.data.message),r.pushNotifycation("error",t),r.setState({loading:!1})}).catch(function(e){console.log(e),r.pushNotifycation("error","Đăng nhập không thành công"),r.setState({loading:!1})});case 4:case"end":return e.stop()}},e,u)}),o=function(){var e=a.apply(this,arguments);return new Promise(function(t,n){return function r(a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});t(u)}("next")})},function(){return o.apply(this,arguments)})},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this.state,t=e.auth,n=e.loading;return o.default.createElement(u.default,{actions:this.actions,loading:n,auth:t})}}]),t}();t.default=(0,l.connect)(null,{setCurrentUser:c.setCurrentUser})(d)},1283:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.actions,n=e.auth,r=e.loading;return o.default.createElement("div",{className:"login-page"},o.default.createElement("form",{className:"form-login"},o.default.createElement("img",{className:"mb-4",src:"https://getbootstrap.com/docs/4.0/assets/brand/bootstrap-solid.svg",alt:"",width:"72",height:"72"}),o.default.createElement("h1",{className:"text-center h3 mb-3 font-weight-normal"},"Đăng nhập"),o.default.createElement("input",{value:n.email||"",style:{marginBottom:"5px"},id:"email",onChange:t.handleChange,type:"email",className:"form-control",placeholder:"Email",required:!0,autoFocus:!0}),o.default.createElement("input",{value:n.password||"",style:{marginBottom:"10px"},id:"password",onChange:t.handleChange,type:"password",className:"form-control",placeholder:"Mật khẩu",required:!0}),o.default.createElement("button",{disabled:r,onClick:t.handleLogin,className:"btn btn-lg btn-primary btn-block",type:"submit"},r&&o.default.createElement("i",{style:{marginRight:"5px"},className:"fa fa-circle-o-notch fa-spin","aria-hidden":"true"}),"Đăng nhập"),o.default.createElement("p",{className:"text-center mt-5 mb-3 text-muted"},"© 2019-2020")))}},1284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),s=(r=o)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"render",value:function(){return s.default.createElement("h1",null,"Signup")}}]),t}();t.default=u},1285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.Component),r(n,[{key:"componentDidMount",value:function(){this.props.isAuthenticated||this.props.history.push("/auth/login")}},{key:"render",value:function(){return s.default.createElement(e,this.props)}}]),n}();return(0,u.connect)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},null)(t)};var a,o=n(1),s=(a=o)&&a.__esModule?a:{default:a},u=n(130)},1286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1287),s=(r=o)&&r.__esModule?r:{default:r},u=n(204);var i=("object"===("undefined"==typeof window?"undefined":a(window))&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):u.compose)(),l=(0,u.createStore)(s.default,i);t.default=l},1287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(204),a=u(n(1288)),o=u(n(1289)),s=u(n(1290));function u(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.combineReducers)({group:a.default,auth:o.default,groups:s.default})},1288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"SET_CURRENT_GROUP":e=t.payload.group}return e}},1289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={isAuthenticated:!1,user:{}};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n.type){case"AUTH_SET_CURRENT_USER":return{isAuthenticated:(e=n.user,!!e._id),user:n.user};case"AUTH_USER_LOG_OUT":return{isAuthenticated:!1,user:{}};default:return t}}},1290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"GROUPS_INIT_GROUPS":e=t.groups}return e}},285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCurrentUser=function(e){localStorage.setItem("tokenJWT",e),(0,s.setAuthorizationHeader)(e);var t=o.default.decode(e),n=t._id,r=t.username,a=t.avatar;return{type:"AUTH_SET_CURRENT_USER",user:{_id:n,username:r,avatar:a}}},t.handleLogOut=function(){return{type:"AUTH_USER_LOG_OUT"}};var r,a=n(1180),o=(r=a)&&r.__esModule?r:{default:r},s=n(591)},539:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCurrentGroup=function(e){return{type:"SET_CURRENT_GROUP",payload:{group:e}}}},591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAuthorizationHeader=void 0;var r,a=n(1279),o=(r=a)&&r.__esModule?r:{default:r};t.setAuthorizationHeader=o.default},616:function(e,t,n){n(617),e.exports=n(818)},818:function(e,t,n){"use strict";var r=f(n(1)),a=f(n(8)),o=n(592),s=n(130),u=f(n(828)),i=n(591),l=n(285),c=f(n(1286));function f(e){return e&&e.__esModule?e:{default:e}}localStorage.tokenJWT?c.default.dispatch((0,l.setCurrentUser)(localStorage.tokenJWT)):c.default.dispatch((0,l.handleLogOut)()),(0,i.setAuthorizationHeader)(localStorage.tokenJWT),a.default.render(r.default.createElement(s.Provider,{store:c.default},r.default.createElement(o.BrowserRouter,null,r.default.createElement(o.Switch,null,u.default.map(function(e,t){return r.default.createElement(o.Route,{key:t,exact:e.exact,path:e.path,component:e.component})})))),document.getElementById("app"))},828:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(829)),a=o(n(1280));function o(e){return e&&e.__esModule?e:{default:e}}var s=[{path:"/",exact:!0,component:(0,o(n(1285)).default)(r.default)},{path:"/auth",component:a.default}];t.default=s},829:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=f(a),s=n(299);n(533);var u=f(n(1125)),i=f(n(1147)),l=f(n(1148)),c=f(n(1178));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),u=0;u<a;u++)o[u]=arguments[u];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.pushNotifycation=function(e,t){s.notification[e]({message:t})},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this.props.history;return o.default.createElement(a.Fragment,null,o.default.createElement(c.default,{history:e,pushNotifycation:this.pushNotifycation}),o.default.createElement("div",{className:"container-fluid"},o.default.createElement("div",{className:"row"},o.default.createElement(u.default,{pushNotifycation:this.pushNotifycation}),o.default.createElement(l.default,{pushNotifycation:this.pushNotifycation}),o.default.createElement(i.default,null))))}}]),t}();t.default=d},880:function(e,t,n){var r={"./af":354,"./af.js":354,"./ar":355,"./ar-dz":356,"./ar-dz.js":356,"./ar-kw":357,"./ar-kw.js":357,"./ar-ly":358,"./ar-ly.js":358,"./ar-ma":359,"./ar-ma.js":359,"./ar-sa":360,"./ar-sa.js":360,"./ar-tn":361,"./ar-tn.js":361,"./ar.js":355,"./az":362,"./az.js":362,"./be":363,"./be.js":363,"./bg":364,"./bg.js":364,"./bm":365,"./bm.js":365,"./bn":366,"./bn.js":366,"./bo":367,"./bo.js":367,"./br":368,"./br.js":368,"./bs":369,"./bs.js":369,"./ca":370,"./ca.js":370,"./cs":371,"./cs.js":371,"./cv":372,"./cv.js":372,"./cy":373,"./cy.js":373,"./da":374,"./da.js":374,"./de":375,"./de-at":376,"./de-at.js":376,"./de-ch":377,"./de-ch.js":377,"./de.js":375,"./dv":378,"./dv.js":378,"./el":379,"./el.js":379,"./en-au":380,"./en-au.js":380,"./en-ca":381,"./en-ca.js":381,"./en-gb":382,"./en-gb.js":382,"./en-ie":383,"./en-ie.js":383,"./en-il":384,"./en-il.js":384,"./en-nz":385,"./en-nz.js":385,"./eo":386,"./eo.js":386,"./es":387,"./es-do":388,"./es-do.js":388,"./es-us":389,"./es-us.js":389,"./es.js":387,"./et":390,"./et.js":390,"./eu":391,"./eu.js":391,"./fa":392,"./fa.js":392,"./fi":393,"./fi.js":393,"./fo":394,"./fo.js":394,"./fr":395,"./fr-ca":396,"./fr-ca.js":396,"./fr-ch":397,"./fr-ch.js":397,"./fr.js":395,"./fy":398,"./fy.js":398,"./gd":399,"./gd.js":399,"./gl":400,"./gl.js":400,"./gom-latn":401,"./gom-latn.js":401,"./gu":402,"./gu.js":402,"./he":403,"./he.js":403,"./hi":404,"./hi.js":404,"./hr":405,"./hr.js":405,"./hu":406,"./hu.js":406,"./hy-am":407,"./hy-am.js":407,"./id":408,"./id.js":408,"./is":409,"./is.js":409,"./it":410,"./it.js":410,"./ja":411,"./ja.js":411,"./jv":412,"./jv.js":412,"./ka":413,"./ka.js":413,"./kk":414,"./kk.js":414,"./km":415,"./km.js":415,"./kn":416,"./kn.js":416,"./ko":417,"./ko.js":417,"./ku":418,"./ku.js":418,"./ky":419,"./ky.js":419,"./lb":420,"./lb.js":420,"./lo":421,"./lo.js":421,"./lt":422,"./lt.js":422,"./lv":423,"./lv.js":423,"./me":424,"./me.js":424,"./mi":425,"./mi.js":425,"./mk":426,"./mk.js":426,"./ml":427,"./ml.js":427,"./mn":428,"./mn.js":428,"./mr":429,"./mr.js":429,"./ms":430,"./ms-my":431,"./ms-my.js":431,"./ms.js":430,"./mt":432,"./mt.js":432,"./my":433,"./my.js":433,"./nb":434,"./nb.js":434,"./ne":435,"./ne.js":435,"./nl":436,"./nl-be":437,"./nl-be.js":437,"./nl.js":436,"./nn":438,"./nn.js":438,"./pa-in":439,"./pa-in.js":439,"./pl":440,"./pl.js":440,"./pt":441,"./pt-br":442,"./pt-br.js":442,"./pt.js":441,"./ro":443,"./ro.js":443,"./ru":444,"./ru.js":444,"./sd":445,"./sd.js":445,"./se":446,"./se.js":446,"./si":447,"./si.js":447,"./sk":448,"./sk.js":448,"./sl":449,"./sl.js":449,"./sq":450,"./sq.js":450,"./sr":451,"./sr-cyrl":452,"./sr-cyrl.js":452,"./sr.js":451,"./ss":453,"./ss.js":453,"./sv":454,"./sv.js":454,"./sw":455,"./sw.js":455,"./ta":456,"./ta.js":456,"./te":457,"./te.js":457,"./tet":458,"./tet.js":458,"./tg":459,"./tg.js":459,"./th":460,"./th.js":460,"./tl-ph":461,"./tl-ph.js":461,"./tlh":462,"./tlh.js":462,"./tr":463,"./tr.js":463,"./tzl":464,"./tzl.js":464,"./tzm":465,"./tzm-latn":466,"./tzm-latn.js":466,"./tzm.js":465,"./ug-cn":467,"./ug-cn.js":467,"./uk":468,"./uk.js":468,"./ur":469,"./ur.js":469,"./uz":470,"./uz-latn":471,"./uz-latn.js":471,"./uz.js":470,"./vi":472,"./vi.js":472,"./x-pseudo":473,"./x-pseudo.js":473,"./yo":474,"./yo.js":474,"./zh-cn":475,"./zh-cn.js":475,"./zh-hk":476,"./zh-hk.js":476,"./zh-tw":477,"./zh-tw.js":477};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=880}},[[616,1,2]]]);