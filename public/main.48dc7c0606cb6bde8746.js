(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1127:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),s=m(o),i=m(n(128)),l=n(113),u=m(n(1146)),c=m(n(1148)),d=n(195),f=n(540),p=n(80);function m(e){return e&&e.__esModule?e:{default:e}}function g(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var s=t[a](o),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}("next")})}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var e,n,a,o,s,l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,c=Array(u),d=0;d<u;d++)c[d]=arguments[d];return n=a=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={newGroup:{},openModal:{makeNewGroup:!1},isLoading:{makeNewGroup:!1},friends:[],membersSelected:[]},a.pushNotifycation=function(e,t){p.notification[e]({message:t})},a.isMe=function(e){return a.props.currentUser._id===e},a.actions={isChecked:function(e){var t=a.state.newGroup;if(!t.members)return-1;for(var n=0;n<t.members.length;n++){if(t.members[n]._id===e)return n}return-1},handleChangeStatusModal:function(e){var t=a.state.openModal;t[e]=!t[e],a.setState({openModal:t})},handleMakeNewGroup:(s=g(regeneratorRuntime.mark(function e(){var t,n,o,s,u,c,d,f,p,m,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.newGroup,o=t.isLoading,s=t.openModal,n.members&&0!==n.members.length){e.next=4;break}return a.pushNotifycation("error","Chưa chọn thành viên để tạo nhóm chat"),e.abrupt("return");case 4:for(o.makeNewGroup=!0,a.setState({isLoading:o}),u=[],c=!0,d=!1,f=void 0,e.prev=10,p=n.members[Symbol.iterator]();!(c=(m=p.next()).done);c=!0)g=m.value,u.push(g._id);e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),d=!0,f=e.t0;case 18:e.prev=18,e.prev=19,!c&&p.return&&p.return();case 21:if(e.prev=21,!d){e.next=24;break}throw f;case 24:return e.finish(21);case 25:return e.finish(18);case 26:return e.next=28,i.default.post("/api/v1/groups",r({},n,{members:u})).then(function(e){console.log(e.data),s.makeNewGroup=!1;var t=e.data.newGroup;a.props.setCurrentGroup(t)},function(e){var t="Thêm nhóm "+n.name+" không thành công";e.response.data.message&&(t=e.response.data.message),a.pushNotifycation("error",t)});case 28:o.makeNewGroup=!1,a.setState({isLoading:o,openModal:s});case 30:case"end":return e.stop()}},e,l,[[10,14,18,26],[19,,21,25]])})),function(){return s.apply(this,arguments)}),getFriends:(o=g(regeneratorRuntime.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.message.loading("",0),e.next=3,i.default.get("/api/v1/me/friends").then(function(e){var t=e.data.friends;a.actions.handleChangeStatusModal("makeNewGroup"),a.setState({friends:t})});case 3:p.message.destroy();case 4:case"end":return e.stop()}},e,l)})),function(){return o.apply(this,arguments)}),handleChangeNewGroup:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=a.state.newGroup;if("members"===e)if(r.members){var o=a.actions.isChecked(t);-1!==o?r.members.splice(o,1):r.members[r.members.length]=n}else r.members=[n];else r[e]=t;a.setState({newGroup:r})}},h(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"componentDidMount",value:function(){var e=g(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.get("/api/v1/groups").then(function(e){var n=e.data.groups||[];t.props.initGroups(n),t.props.setCurrentGroup(n[0])},function(){t.setState({groups:[]})});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.groups,n=this.state,r=n.openModal,a=n.isLoading,o=n.friends,i=n.newGroup;return s.default.createElement("nav",{className:"col-md-3 bg-light sidebar"},s.default.createElement("div",{className:"sidebar-sticky"},s.default.createElement("div",null,s.default.createElement("div",{className:"pt-3 px-4"},s.default.createElement("h2",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},"Groups ",s.default.createElement("i",{id:"icon-open-modal-make-new-group",onClick:function(){return e.actions.getFriends()},style:{cursor:"pointer"},className:"fa fa-plus","aria-hidden":"true"}))),s.default.createElement("div",{className:"list-groups"},s.default.createElement(u.default,{currentUser:this.props.currentUser,isMe:this.isMe,groups:t,setCurrentGroup:this.props.setCurrentGroup})),s.default.createElement(c.default,{newGroup:i,actions:this.actions,visible:r.makeNewGroup,isLoading:a.makeNewGroup,friends:o}))))}}]),t}();t.default=(0,l.connect)(function(e){return{groups:e.groups,currentUser:e.auth.user}},{setCurrentGroup:d.setCurrentGroup,initGroups:f.initGroups,handleAddNewGroup:f.handleAddNewGroup})(y)},1146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=s(r),o=s(n(1147));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.groups,n=e.setCurrentGroup,s=e.isMe,i=e.currentUser;return a.default.createElement(r.Fragment,null,t.map(function(e,t){return a.default.createElement(o.default,{key:e._id||t,currentUser:i,isMe:s,group:e,setCurrentGroup:n})}))}},1147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=s(r),o=s(n(7));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return a.default.createElement("div",null,a.default.createElement("div",{className:"group-last-message"},a.default.createElement("small",{style:{maxWidth:"80%",overflow:"hidden"}},t(e.lastMessage.user._id)&&"You: ","text"===(s=e.lastMessage).type?s.content?s.content.slice(0,30):"":"image"===s.type?a.default.createElement(r.Fragment,null,"Đã gửi ",s.files.length," bức ảnh ",a.default.createElement("i",{className:"fa fa-picture-o"})):"video"===s.type?a.default.createElement(r.Fragment,null,"Đã gửi ",s.files.length," video ",a.default.createElement("i",{className:"fa fa-video-camera"})):"file"===s.type?a.default.createElement(r.Fragment,null,"Đã gửi ",s.files.length," file đính kèm ",a.default.createElement("b",null,a.default.createElement("i",{className:"fa fa-paperclip"}))):"Đã gửi 1 thứ gì đó hay ho",t(e.lastMessage.user._id)&&function(e){var t="";if(e.memberReaded){var n=!0,r=!1,o=void 0;try{for(var s,i=e.memberReaded[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var l=s.value;l!==e.user._id&&(t+=""===t?l:", "+l)}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return""!==t?a.default.createElement("small",null,a.default.createElement("i",{style:{color:"green",marginLeft:"5px"},className:"fa fa-check-circle-o","aria-hidden":"true"})):null}return null}(e.lastMessage)),!t(e.lastMessage.user._id)&&a.default.createElement("img",{src:e.lastMessage.user.avatar,style:{height:"20px"}})),a.default.createElement("small",{style:{textAlign:"right",width:"100%",display:"inline-block"}},(n=e.lastMessage.createdTime,(0,o.default)(new Date(n)).fromNow())));var n,s}o.default.locale("vi"),t.default=function(e){var t,n=e.group,r=e.setCurrentGroup,o=e.isMe,s=e.currentUser;return a.default.createElement("div",{className:n.numberOfMessagesUnReaded?"group has-new-message px-4":"group px-4"},function(e,t){var n=[],r=!1;1===t.length?r=t[0].online:t=t.filter(function(a){if(a._id!==e._id&&-1===n.indexOf(a._id))return a.online&&(r=!0),n.push(a._id),t});var o=t.length;t=t.slice(0,4);var s={width:"10px",position:"absolute",bottom:0,zIndex:1,transform:"translate(-50%, 50%)",height:"10px",border:"1px solid #fff",borderRadius:"50%",backgroundColor:r?"green":"red"};return a.default.createElement("div",{className:"group-avatar group-avatar-"+(t.length<4?t.length+1:"n")},t.map(function(e,t){if(!(o>5&&t>2))return a.default.createElement("div",{className:"group-avatar-member",id:e._id,key:e._id||t,style:{backgroundImage:"url("+e.avatar+")"}})}),o>5&&a.default.createElement("div",{style:{display:"flex",alignItems:"center",textAlign:"center",fontWeight:"bold",color:"#fff",backgroundColor:"#000"},className:"group-avatar-member"},"+",o-2),a.default.createElement("div",{style:s}))}(s,n.members),a.default.createElement("div",{className:"group-detail"},a.default.createElement("div",{style:{display:"flex",alignItems:"center"}},a.default.createElement("b",{className:"group-name",onClick:function(){return r(n)}},(t=n.name).length<=20?t:t.slice(0,20)+" ..."," ",n.numberOfMessagesUnReaded?a.default.createElement("span",{style:{color:"red"}},"(",n.numberOfMessagesUnReaded,")"):null),n.membersTyping&&0!==n.membersTyping.length?a.default.createElement("img",{style:{height:"10px",marginLeft:"3px"},src:"/images/typing.gif"}):null),n.lastMessage&&i(n,o)))}},1148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=i(r),o=n(80),s=i(n(1149));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.friends,n=e.visible,i=e.isLoading,l=e.actions,u=e.newGroup;return a.default.createElement(r.Fragment,null,a.default.createElement(o.Modal,{width:"60%",title:"Tạo nhóm",visible:n,onCancel:function(){return l.handleChangeStatusModal("makeNewGroup")},footer:[a.default.createElement(o.Button,{key:"back",onClick:function(){return l.handleChangeStatusModal("makeNewGroup")}},"Hủy"),a.default.createElement(o.Button,{key:"submit",type:"primary",disabled:!(u.members&&u.members.length>1),loading:i,onClick:l.handleMakeNewGroup},"Tạo")]},a.default.createElement("div",{className:"modal-make-new-group"},a.default.createElement("div",{className:"row modal-make-new-group-head"},a.default.createElement("div",{className:"col-lg-12"},a.default.createElement("input",{value:u.name||"",onChange:function(e){return l.handleChangeNewGroup("name",e.target.value)},className:"form-control",id:"name",placeholder:"Tên nhóm"}))),a.default.createElement("div",{className:"row modal-make-new-group-main"},a.default.createElement("div",{className:"col-lg-7 modal-make-new-group-main-friends"},a.default.createElement("div",{style:{height:"45px"}},a.default.createElement("input",{className:"form-control",id:"search-friend",placeholder:"Tìm kiếm"})),a.default.createElement("div",{className:"modal-make-new-group-main-friends-data"},a.default.createElement(s.default,{newGroup:u,actions:l,friends:t}))),a.default.createElement("div",{className:"col-lg-5 modal-make-new-group-main-members"},a.default.createElement("div",{style:{height:"45px"}},a.default.createElement("b",null,"Đã chọn ",a.default.createElement("b",null,"(",u.members?u.members.length:0,")"))),a.default.createElement("div",{className:"modal-make-new-group-main-friends-data-selected"},u.members&&a.default.createElement(s.default,{newGroup:u,actions:l,remove:!0,friends:u.members})))))))}},1149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),a=o(n(1150));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.friends,n=e.actions,o=e.remove;return r.default.createElement("div",{style:{marginRight:"10px"}},t.map(function(e,t){return r.default.createElement(a.default,{actions:n,key:e._id||t,remove:o,friend:e})}))}},1150:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),o=(r=a)&&r.__esModule?r:{default:r},s=n(80);t.default=function(e){var t=e.friend,n=e.actions,r=e.remove;return o.default.createElement("div",{className:"item-friend-in-modal-make-new-group",style:{marginBottom:"5px",display:"flex",justifyContent:"space-between",alignItems:"center"}},o.default.createElement("div",{onClick:function(){return n.handleChangeNewGroup("members",t._id,t)},style:{flexGrow:"1"}},o.default.createElement("img",{src:t.avatar,style:{height:"40px",width:"40px",marginRight:"5px"}}),o.default.createElement("b",null,t.name)),o.default.createElement("div",null,r?o.default.createElement(s.Icon,{onClick:function(){return n.handleChangeNewGroup("members",t._id,t)},type:"delete"}):o.default.createElement(s.Checkbox,{checked:-1!==n.isChecked(t._id),onChange:function(){return n.handleChangeNewGroup("members",t._id,t)}})))}},1151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),s=f(o),i=f(n(1152)),l=f(n(128)),u=n(113),c=n(541),d=n(195);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var s=t[a](o),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}("next")})}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){var e,n,a,o,s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];return n=a=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.state={params:{}},a.getFriends=(o=p(regeneratorRuntime.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r({},a.state.params,n),t=[].friends,e.next=4,l.default.get("/api/v1/me/friends",{params:n}).then(function(e){t=e.data.friends||[]},function(){});case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}},e,s)})),function(){return o.apply(this,arguments)}),m(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"componentDidMount",value:function(){var e=p(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFriends();case 2:t=e.sent,this.props.initFriends(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.friends,n=e.setCurrentGroup;return s.default.createElement(o.Fragment,null,s.default.createElement(i.default,{setCurrentGroup:n,friends:t.filter?t.filter:t.all}))}}]),t}();t.default=(0,u.connect)(function(e){return{friends:e.friends}},{initFriends:c.initFriends,setCurrentGroup:d.setCurrentGroup})(g)},1152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),a=o(n(1153));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.friends,n=e.setCurrentGroup;return r.default.createElement("div",{className:"col-md-3"},r.default.createElement("div",{className:"pt-3"},r.default.createElement("h2",null,"Online")),r.default.createElement(a.default,{setCurrentGroup:n,friends:t}))}},1153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),a=o(n(1154));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.friends,n=e.setCurrentGroup;return t?r.default.createElement("div",{className:"list-friends"},t.map(function(e,t){return r.default.createElement(a.default,{setCurrentGroup:n,key:e._id||t,friend:e})})):null}},1154:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=s(n(1)),o=s(n(7));function s(e){return e&&e.__esModule?e:{default:e}}o.default.locale("vi");var i={avatar:{width:"30px",height:"30px",borderRadius:"50%",marginRight:"5px"},status:{width:"5px",height:"5px",borderRadius:"50%"}};t.default=function(e){var t,n=e.friend,s=e.setCurrentGroup;return a.default.createElement("div",{onClick:function(){return s(n.group)},className:"item-list-friends",style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},a.default.createElement("div",{className:"item-list-friends-info"},a.default.createElement("img",{src:n.avatar,style:i.avatar}),a.default.createElement("b",null,n.name)),a.default.createElement("div",{className:"item-list-friends-status"},n.online?a.default.createElement("div",{style:r({},i.status,{background:"green"})}):n.latestTimeConnection?(t=n.latestTimeConnection,a.default.createElement("small",null,(0,o.default)(new Date(t)).fromNow())):a.default.createElement("div",{style:r({},i.status,{background:"red"})})))}},1155:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),s=v(o),i=n(113),l=v(n(1156)),u=v(n(1181)),c=v(n(1184)),d=v(n(128)),f=n(152),p=n(195),m=n(540),g=n(80),h=n(541),y=v(n(1284));function v(e){return e&&e.__esModule?e:{default:e}}function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var s=t[a](o),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}("next")})}}var w,M=void 0,j=void 0,O=8e3,k=g.Modal.confirm,x=(w=E(regeneratorRuntime.mark(function e(t,n){var r,a,o,s,i,l,u,c,d,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:480,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:360;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d=function(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],a=atob(t[1]),o=a.length,s=new Uint8Array(o);o--;)s[o]=a.charCodeAt(o);return new File([s],n+".jpg",{type:r})},a=function(e){return new Promise(function(t){e.onload=function(){t({width:e.width,height:e.height})}})},(r=document.createElement("img")).src=t,o=document.createElement("canvas"),s=o.getContext("2d"),e.next=8,a(r);case 8:return i=e.sent,l=i.width,u=i.height,l>u?l>f&&(u*=f/l,l=f):u>p&&(l*=p/u,u=p),o.width=l,o.height=u,s.drawImage(r,0,0,l,u),c=o.toDataURL("image/jpeg"),e.abrupt("return",d(c));case 17:case"end":return e.stop()}},e,void 0)})),function(e,t){return w.apply(this,arguments)}),N=function(e){function t(){var e,n,a,o,s,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=a=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.state={messages:[],membersTyping:[],messageSelected:null,message:{type:"text",content:null,files:[]},openModal:{listMembers:!1},loading:{addNewMember:!1,deleteMember:!1,loadMoreMessage:!1},newMemberIds:[],socket:null,openExtendTypeMessage:!1,deleteMemberId:null,page:0,numberOfPage:0,isTyping:!1,percentCompleted:0},a.handleScroll=function(){var e=document.getElementById("wrapper-messages"),t=a.state.page+1,n=a.state.numberOfPage;if(0===e.scrollTop&&t<n){var o=r({},a.state.loading);o.loadMoreMessage=!0,a.setState({loading:o}),setTimeout(E(regeneratorRuntime.mark(function n(){var r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.scrollHeight,n.next=3,a.GetMessage(a.props.group._id,t);case 3:o=e.scrollHeight,e.scrollTop=o-r;case 5:case"end":return n.stop()}},n,i)})),1e3)}},a.actions={setMessageSelected:function(e){a.setState({messageSelected:e})},confirmDeleteMember:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a,o=a.props.group,s="Bạn có thực sự muốn xóa người dùng "+(e.name||e.username)+" khỏi nhóm chat "+o.name+"?";t&&(s="Bạn có thực sự muốn rời nhóm chát "+o.name+" ?"),k({title:s,width:"30%",onOk:function(){return new Promise(function(a,s){d.default.delete("/api/v1/groups/"+o._id+"/members",{params:{deleteMemberId:e._id}}).then(function(s){n.props.pushNotifycation("success","Xóa người dùng "+(e.name||e.username)+" khỏi nhóm chat "+o.name+" thành công");for(var i=o.members,l=0;l<i.length;l++)if(i[l]._id===e._id){n.props.deleteMemberOfGroup(i[l]._id);break}(n.actions.handleChangeStatusModal("listMembers"),i=[].concat(b(o.members)).filter(function(t){return t._id!==e._id}),s.data.admin&&(o=r({},o,{admin:s.data.admin})),0===i.length||t)?n.props.handleDeleteGroupById(o._id):-1!==y.default.findIndex(n.props.groups,function(e){return e._id===o._id})&&n.props.handleUpdateGroup(r({},o,{members:i}));a()},function(t){var r="Xóa người dùng "+(e.name||e.username)+" khỏi nhóm chat "+o.name+" không thành công";t.response.data.message&&(r=t.response.data.message),n.props.pushNotifycation("error",r),s()})})},onCancel:function(){}})},handleChangeNewMemberIds:function(e){return a.setState({newMemberIds:e})},handleChangeStatusModal:function(e){var t=a.state,n=t.openModal,r=t.newMemberIds;n[e]=!n[e],"lisMembers"===e&&(r=""),a.setState({openModal:n,newMemberIds:r})},handleChangeStateOpenExtendTypeMessage:function(){a.setState({openExtendTypeMessage:!a.state.openExtendTypeMessage})},handleAddNewMembers:(s=E(regeneratorRuntime.mark(function e(){var t,n,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.group,n=a.state,o=n.loading,s=n.newMemberIds,o.addNewMember=!0,a.setState({loading:o}),e.next=6,d.default.post("/api/v1/groups/"+t._id+"/members",{newMemberIds:s.split(",")}).then(function(e){a.props.pushNotifycation("success","Thêm thành viên vào nhóm "+t.name+" thành công"),a.props.addMembersGroup(e.data.newMembers),a.actions.handleChangeStatusModal("listMembers"),a.props.handleUpdateGroup(r({},t,{members:[].concat(b(t.members),b(e.data.newMembers))}))},function(e){var n="Thêm thành viên vào nhóm "+t.name+" không thành công";e.response.data.message&&(n=e.response.data.message),a.props.pushNotifycation("success",n)});case 6:o.addNewMember=!1,a.setState({loading:o});case 8:case"end":return e.stop()}},e,i)})),function(){return s.apply(this,arguments)}),handleSendMessage:(o=E(regeneratorRuntime.mark(function e(){var t,n,o,s,l,u,c,f,p,m,g,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(document.getElementById("message-content").blur(),t=r({},a.state.message),n=[].concat(b(a.state.membersTyping)),o=new FormData,s={headers:{"Content-Type":"multipart/form-data"}},"text"===t.type||!t.files||0===t.files.length){e.next=44;break}l=void 0,u=void 0,c=!0,f=!1,p=void 0,e.prev=10,m=t.files[Symbol.iterator]();case 12:if(c=(g=m.next()).done){e.next=30;break}if(h=g.value,"image"!==t.type){e.next=21;break}return e.next=17,x(h.src,h.file.name,1280,720);case 17:l=e.sent,o.append("attachments",l),e.next=22;break;case 21:o.append("attachments",h.file);case 22:if("video"!==t.type&&"image"!==t.type){e.next=27;break}return e.next=25,x(h.src,h.file.name,480,360);case 25:u=e.sent,o.append("thumbnails",u);case 27:c=!0,e.next=12;break;case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(10),f=!0,p=e.t0;case 36:e.prev=36,e.prev=37,!c&&m.return&&m.return();case 39:if(e.prev=39,!f){e.next=42;break}throw p;case 42:return e.finish(39);case 43:return e.finish(36);case 44:t.content&&o.append("content",t.content),o.append("groupId",a.props.group._id),o.append("type",t.type),s.onUploadProgress=function(e){var t=Math.floor(100*e.loaded/e.total);a.setState({percentCompleted:t}),console.log("percentCompleted",t)},d.default.post("/api/v1/messages",o,s).then(function(){a.setState({percentCompleted:0}),t={type:"text",content:null,files:[]},a.scrollToBottomOfWrapperMessages(),document.getElementById("message-content").focus(),document.querySelector("input[type='file']")&&(document.querySelector("input[type='file']").value="");var e=y.default.findIndex(n,function(e){return e._id===a.props.currentUser._id});if(-1!==e&&(n.splice(e,1),-1!==y.default.findIndex(a.props.groups,function(e){return e._id===a.props.group._id}))){var o=r({},a.props.group,{membersTyping:n});a.props.handleUpdateGroup(o,!1)}a.setState({message:t,membersTyping:n,openExtendTypeMessage:!1})},function(){a.setState({percentCompleted:0});var e=a.state.messages,t=a.props.currentUser;e.push({type:"text",content:"Gửi thất bại",error:!0,createdTime:Date.now(),user:t}),document.querySelector("input[type='file']").value="",a.setState({messages:e,message:{type:"text",content:null,files:[]}}),a.scrollToBottomOfWrapperMessages()});case 49:case"end":return e.stop()}},e,i,[[10,32,36,44],[37,,39,43]])})),function(){return o.apply(this,arguments)}),handleReadLastMessage:function(){var e=r({},a.state.messages[a.state.messages.length-1]);-1===y.default.findIndex(e.memberReaded,function(e){return e._id===a.props.currentUser._id||e===a.props.currentUser._id})&&M.emit("readLastMessage",{groupId:a.props.group._id})},handleOnTyping:function(){a.state.isTyping||(a.setState({isTyping:!0}),M.emit("typing",{groupId:a.props.group._id})),clearTimeout(j),j=setTimeout(function(){a.actions.handleUnTyping()},O)},handleUnTyping:function(){a.state.isTyping&&(a.setState({isTyping:!1}),M.emit("unTyping",{groupId:a.props.group._id}))},handleChangeMessage:function(e,t){a.actions.handleOnTyping();var n=a.state.message;n[e]=t,"content"===e&&(t||a.actions.handleUnTyping(),n.files&&0!==n.files.length||(n.type="text")),a.setState({message:n})},handleDeleteFilesWithIndex:function(e){var t=a.state.message,n=[].concat(b(t.files));n.splice(e,1),t.files=n,0===t.files.length&&(t.files=[],t.type="text"),a.setState({message:t})},handleChangeMessageWithFile:function(e,t){a.actions.handleOnTyping();var n=a.state.message;if("image"!==e&&t[0].size>26214400)a.props.pushNotifycation("error","Kích thước file upload không được vượt quá 25 MB");else{console.log(t.length),n.type=e,n.files=[];for(var r=function(r){var o=new FileReader;n.files[r]||(n.files[r]={}),n.files[r].file=t[r],n.files[r].name=t[r].name+" - "+function(e){var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]}(t[r].size),n.files[r].isLoading=!0,a.setState({message:n}),a.scrollToBottomOfWrapperMessages(),o.onload=function(t){if("video"===e){var o=document.createElement("video");o.src=t.target.result,o.duration>5&&(o.currentTime=2);var s=document.createElement("canvas"),i=s.getContext("2d");o.addEventListener("loadeddata",function(){var e=o.videoWidth/o.videoHeight,t=o.videoWidth-100,l=parseInt(t/e,10);s.width=t,s.height=l,console.log("width, height",t,l),i.drawImage(o,0,0,t,l),n.files[r].src=s.toDataURL("image/jpeg"),n.files[r].isLoading=!1,a.setState({message:n})})}else n.files[r].src=t.target.result,n.files[r].isLoading=!1,a.setState({message:n});a.scrollToBottomOfWrapperMessages()},o.readAsDataURL(t[r]),document.getElementById("message-content").focus()},o=0;o<t.length;o++)r(o)}}},a.isMe=function(e){return a.props.currentUser._id===e},a.isLatestMessage=function(e){return!(!a.state.messages||a.state.messages[a.state.messages.length-1]._id!==e)},_(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"scrollToBottomOfWrapperMessages",value:function(){var e=document.getElementById("wrapper-messages");e&&(console.log("scrollToBottomOfWrapperMessages"),e.scrollTop=e.scrollHeight)}},{key:"GetMessage",value:function(){var e=E(regeneratorRuntime.mark(function e(t){var n,a=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r({},this.state.loading),e.next=3,d.default.get("/api/v1/messages",{params:{group:t,page:o}}).then(function(e){var t=e.data.messages||[];if(0!==o)t=[].concat(b(t),b(a.state.messages)),a.setState({messages:t,page:o});else{var n=e.data.numberOfPage;a.setState({messages:t,numberOfPage:n,page:o}),a.scrollToBottomOfWrapperMessages()}},function(){a.setState({messages:a.state.messages||[]})});case 3:n.loadMoreMessage=!1,this.setState({loading:n});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=this;(M=(0,l.default)("http://chatapp.stovietnam.com",{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:1/0})).on("newConnection",function(e){console.log(e)}),M.on("readedLastMessage",function(t){if(e.state.messages){var n=[].concat(b(e.state.messages)),a=r({},n[n.length-1]),o=[].concat(b(a.memberReaded));if(a.user._id!==t.user._id){a.memberReaded||(a.memberReaded=[]),a.memberReaded.push(t.user),o.push(t.user._id),n[e.state.messages.length-1]=a,e.setState({messages:n}),e.scrollToBottomOfWrapperMessages();var s=void 0;if(e.props.groups){var i=!0,l=!1,u=void 0;try{for(var c,d=e.props.groups[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var f=c.value;f._id===a.group._id&&(s=f)}}catch(e){l=!0,u=e}finally{try{!i&&d.return&&d.return()}finally{if(l)throw u}}}s&&(s.lastMessage=r({},s.lastMessage,{memberReaded:o}),e.props.handleUpdateGroup(s))}}}),M.on("yourFriendOnline",function(t){console.log("your friend have just connected",t);var n=e.props.groups,a=!0,o=!1,s=void 0;try{for(var i,l=n[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){var u=i.value,c=u.members,d=y.default.findIndex(c,function(e){return e._id===t._id});-1!==d&&(c[d].online=!0,e.props.handleUpdateGroup(u,!1))}}catch(e){o=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw s}}e.props.updateFriend(r({},t,{online:!0}))}),M.on("yourFriendOffline",function(t){console.log("your friend have just disconnected",t);var n=e.props.groups,a=void 0,o=!0,s=!1,i=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=c.members;-1!==(a=y.default.findIndex(d,function(e){return e._id===t._id}))&&(d[a].online=!1,e.props.handleUpdateGroup(c,!1))}}catch(e){s=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw i}}e.props.updateFriend(r({},t,{online:!1,latestTimeConnection:Date.now()}))}),M.emit("authenticate",{tokenJWT:localStorage.tokenJWT}),M.on("unauthorized",function(t){console.log("unauthorized: ",t.message),t?(e.props.pushNotifycation("error",t.message),M.disconnect(),"error"===t.level&&(e.props.handleLogOut(),e.props.history.replace("/auth/login"))):e.props.pushNotifycation("error","Không có phản hồi từ server")}),M.on("typing",function(t){if(console.log("someone is typing",t),t.user._id!==e.props.currentUser._id){var n=void 0;if(t.groupId!==e.props.group._id)try{var a=y.default.findIndex(e.props.groups,function(e){return e._id===t.groupId});if(-1!==a){n=e.props.groups[a].membersTyping?[].concat(b(e.props.groups[a].membersTyping)):[],-1===y.default.findIndex(e.props.groups[a].membersTyping,function(e){return e._id===t.user._id})&&n.unshift(t.user);var o=r({},e.props.groups[a],{membersTyping:n});e.props.handleUpdateGroup(o,!1)}}catch(e){console.log("catch socket on typing",e)}else n=[].concat(b(e.state.membersTyping)),-1===y.default.findIndex(n,function(e){return e._id===t.user._id})&&n.unshift(t.user),document.getElementById("message-content").placeholder="",e.setState({membersTyping:n}),1===n.length&&e.scrollToBottomOfWrapperMessages()}}),M.on("unTyping",function(t){var n=void 0;if(t.groupId!==e.props.group._id){var a=y.default.findIndex(e.props.groups,function(e){return e._id===t.groupId});if(-1!==a&&e.props.groups[a].membersTyping){n=[].concat(b(e.props.groups[a].membersTyping));var o=y.default.findIndex(e.props.groups[a].membersTyping,function(e){return e._id===t.user._id});if(-1!==o){n.splice(o,1);var s=r({},e.props.groups[a],{membersTyping:n});e.props.handleUpdateGroup(s,!1)}}}else{n=[].concat(b(e.state.membersTyping));var i=y.default.findIndex(n,function(e){return e._id===t.user._id});if(-1!==i&&(n.splice(i,1),t.groupId!==e.props.group._id)){var l=r({},e.props.group,{membersTyping:n});e.props.handleUpdateGroup(l,!1)}e.setState({membersTyping:n}),0===n.length&&e.scrollToBottomOfWrapperMessages()}}),M.on("receiveNewMessage",function(t){var n=r({},t.group,{lastMessage:r({},t,{user:t.user,memberReaded:[]}),numberOfMessagesUnReaded:0});if(e.props.group._id===t.group._id){var a=e.state.messages;a.push(t),e.setState({messages:a}),e.scrollToBottomOfWrapperMessages(),e.props.handleUpdateGroup(n),e.props.setCurrentGroup(n)}else{if(e.props.currentUser._id!==t.user._id){var o=void 0;if(e.props.groups){var s=!0,i=!1,l=void 0;try{for(var u,c=e.props.groups[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;d._id===n._id&&(o=d)}}catch(e){i=!0,l=e}finally{try{!s&&c.return&&c.return()}finally{if(i)throw l}}}n.numberOfMessagesUnReaded=o?o.numberOfMessagesUnReaded+1:1}e.props.handleUpdateGroup(n)}})}},{key:"componentWillReceiveProps",value:function(e){if(e.group._id&&e.group._id!==this.props.group._id){e.group.membersTyping&&this.setState({membersTyping:e.group.membersTyping}),this.setState({messages:null,page:0,numberOfPage:0}),this.GetMessage(e.group._id),M.emit("joinRoom",{groupId:e.group._id});var t=void 0;if(this.props.groups){var n=!0,r=!1,a=void 0;try{for(var o,s=this.props.groups[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value;i._id===e.group._id&&(t=i)}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}}t&&0!==t.numberOfMessagesUnReaded&&(t.numberOfMessagesUnReaded=0,this.props.handleUpdateGroup(t,!1)),this.props.group._id&&(this.setState({membersTyping:[]}),M.emit("leaveRoom",{groupId:this.props.group._id}))}}},{key:"render",value:function(){var e=this.props.group,t=this.state,n=t.openModal,r=t.loading,a=t.newMemberIds,o=t.messages,i=t.message,l=t.membersTyping,d=t.openExtendTypeMessage,f=t.percentCompleted,p=t.messageSelected;return s.default.createElement("main",{role:"main",className:"col-md-6 ml-sm-auto pt-3 px-4 border-right",style:{height:"calc(100vh - 48px)"}},s.default.createElement(u.default,{isLoadingLoadMoreMessage:r.loadMoreMessage,handleScroll:this.handleScroll,messageSelected:p,isLatestMessage:this.isLatestMessage,message:i,openExtendTypeMessage:d,isMe:this.isMe,membersTyping:l,group:e,actions:this.actions,messages:o,percentCompleted:f}),s.default.createElement(c.default,{isMe:this.isMe,isAdmin:e.admin&&this.isMe(e.admin),group:e,actions:this.actions,isLoading:r.addNewMember,visible:n.listMembers,newMemberIds:a}))}}]),t}();t.default=(0,i.connect)(function(e){return{groups:e.groups,group:e.group,currentUser:e.auth.user,auth:e.auth}},{handleLogOut:f.handleLogOut,setCurrentGroup:p.setCurrentGroup,handleDeleteGroupById:m.handleDeleteGroupById,deleteMemberOfGroup:p.deleteMemberOfGroup,addMembersGroup:p.addMembersGroup,handleUpdateGroup:m.handleUpdateGroup,updateFriend:h.updateFriend})(N)},1178:function(e,t){},1181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=i(r),o=i(n(1182)),s=n(80);function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t,n=e.group,i=e.actions,u=e.messages,c=e.message,d=e.membersTyping,f=e.isMe,p=e.openExtendTypeMessage,m=e.percentCompleted,g=e.isLatestMessage,h=e.messageSelected,y=e.handleScroll,v=e.isLoadingLoadMoreMessage,b=function(e){var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]};return a.default.createElement(r.Fragment,null,n._id&&a.default.createElement("div",{style:{position:"relative",width:"100%"}},a.default.createElement("div",{className:"info-group",style:{width:"100%",background:"#eee",position:"absolute",display:"flex",justifyContent:"space-between",padding:"5px 10px",borderRadius:"3px"}},a.default.createElement("span",null,a.default.createElement("b",null,n.name),n.admin&&a.default.createElement("small",{onClick:function(){return i.handleChangeStatusModal("listMembers")},style:{cursor:"pointer"}}," ",n.members.length," thành viên")),v&&a.default.createElement("span",null,a.default.createElement("img",{src:"/images/loading.gif",style:{height:"15px"}})))),a.default.createElement("div",{style:{marginTop:"31px",display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"}},a.default.createElement("div",{id:"wrapper-messages",onScroll:y,style:{flexGrow:"1",overflow:"auto",height:"100vh"}},a.default.createElement(o.default,{membersTyping:d,setMessageSelected:i.setMessageSelected,messageSelected:h,numberOfMember:n.members?n.members.length:0,isLatestMessage:g,isMe:f,messages:u})),a.default.createElement("div",null,a.default.createElement("div",{className:"input-message",style:{marginBottom:"40px",position:"relative"}},a.default.createElement("div",{style:{position:"relative"}},a.default.createElement("textarea",{onKeyPress:function(e){"Enter"===e.key&&i.handleSendMessage()},value:c.content||"",id:"message-content",onFocus:i.handleReadLastMessage,onBlur:i.handleUnTyping,onChange:function(e){return i.handleChangeMessage("content",e.target.value)},className:"form-control",placeholder:"Nhập tin nhắn"}),a.default.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:"15px",display:"flex",alignItems:"center"}},a.default.createElement("div",{className:p?"extend-type-message is-extend":"extend-type-message"},p&&a.default.createElement(r.Fragment,null,a.default.createElement("label",{htmlFor:"image",onClick:function(){return i.handleChangeMessage("type","image")}},a.default.createElement("i",{className:"image"===c.type?"fa fa-picture-o selected":"fa fa-picture-o",style:{cursor:"pointer"},"aria-hidden":"true"})),a.default.createElement("input",{accept:"image/*",multiple:!0,onChange:function(e){return i.handleChangeMessageWithFile("image",e.target.files)},id:"image",type:"file"}),a.default.createElement("label",{htmlFor:"video",onClick:function(){return i.handleChangeMessage("type","video")}},a.default.createElement("i",{className:"video"===c.type?"fa fa-video-camera selected":"fa fa-video-camera",style:{margin:"0 5px",cursor:"pointer"},"aria-hidden":"true"})),a.default.createElement("input",{accept:"video/*",onChange:function(e){return i.handleChangeMessageWithFile("video",e.target.files)},id:"video",type:"file"}),a.default.createElement("label",{htmlFor:"file",onClick:function(){return i.handleChangeMessage("type","file")}},a.default.createElement("i",{className:"file"===c.type?"fa fa-paperclip selected":"fa fa-paperclip",style:{cursor:"pointer",fontWeight:"bold"},"aria-hidden":"true"})),a.default.createElement("input",{onChange:function(e){return i.handleChangeMessageWithFile("file",e.target.files)},id:"file",type:"file"})),a.default.createElement("i",{onClick:i.handleChangeStateOpenExtendTypeMessage,style:{cursor:"pointer"},className:"fa fa-chevron-right","aria-hidden":"true"})),a.default.createElement("i",(l(t={onClick:function(){c.content&&i.handleChangeStateOpenExtendTypeMessage},style:{cursor:"pointer",marginLeft:"10px"}},"onClick",i.handleSendMessage),l(t,"className",function(e){return"text"===e.type?e.content?"fa fa-paper-plane-o valid":"fa fa-paper-plane-o":e.files&&0!==e.files.length?"fa fa-paper-plane-o valid":"fa fa-paper-plane-o"}(c)),l(t,"aria-hidden","true"),t)))),"text"!==c.type&&c.files&&0!==c.files.length?a.default.createElement("div",{className:"preview-files-attachment "+c.type},a.default.createElement(r.Fragment,null,c.files.map(function(e,t){return e.isLoading?a.default.createElement("img",{key:t,src:"/images/loading.gif",style:{height:"20px",marginRight:"5px"}}):function(e,t){return"image"===c.type?a.default.createElement("div",{key:t,className:"item-preview-image",onClick:function(){return i.handleDeleteFilesWithIndex(t)}},a.default.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"}),a.default.createElement("img",{src:e.src,style:{height:"50px"}})):"video"===c.type?a.default.createElement("div",{key:t,className:"item-preview-video"},a.default.createElement("i",{className:"fa fa-file-video-o","aria-hidden":"true"})," ",e.file.name," - ",b(e.file.size),a.default.createElement("i",{style:{marginLeft:"5px",cursor:"pointer"},onClick:function(){return i.handleDeleteFilesWithIndex(t)},className:"fa fa-trash-o","aria-hidden":"true"})):"file"===c.type?a.default.createElement("div",{key:t,className:"item-preview-file"},a.default.createElement("i",{className:"fa fa-file-o","aria-hidden":"true"})," ",e.file.name," - ",b(e.file.size),a.default.createElement("i",{style:{marginLeft:"5px",cursor:"pointer"},onClick:function(){return i.handleDeleteFilesWithIndex(t)},className:"fa fa-trash-o","aria-hidden":"true"})):null}(e,t)}))):null,m?a.default.createElement(s.Progress,{percent:m,size:"small",status:"active"}):null))))}},1182:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=s(r),o=s(n(1183));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,n=e.messages,s=e.isMe,i=e.isLatestMessage,l=e.membersTyping,u=e.numberOfMember,c=e.messageSelected,d=e.setMessageSelected;return a.default.createElement("div",{className:"list-messages",style:{marginTop:"10px"}},n&&a.default.createElement(r.Fragment,null,n.map(function(e,t){return a.default.createElement(o.default,{key:e._id||t,setMessageSelected:d,messageSelected:c,message:e,numberOfMember:u,isLatestMessage:i,isMe:s})})),a.default.createElement("div",{className:"item-message"},l&&0!==l.length?(t=l,a.default.createElement("div",{style:{display:"flex",alignItems:"center"}},t.map(function(e,t){return a.default.createElement("img",{key:e._id||t,src:e.avatar,style:{height:"30px",width:"30px",marginRight:"5px"}})}),a.default.createElement("img",{style:{clear:"both",display:"block",height:"20px",borderRadius:0},src:"/images/typing.gif"}))):null))}},1183:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),o=(r=a)&&r.__esModule?r:{default:r},s=n(80);function i(e){return new Date(e).toLocaleTimeString()+" - "+new Date(e).toLocaleDateString()}t.default=function(e){var t,n,r=e.message,l=e.isMe,u=e.isLatestMessage,c=e.numberOfMember;return o.default.createElement("div",{className:l(r.user._id)?"item-message me":"item-message"},!l(r.user._id)&&o.default.createElement("img",{src:r.user.avatar,style:{height:"30px",width:"30px",marginRight:"5px"}}),o.default.createElement("div",null,r.content&&o.default.createElement(a.Fragment,null,o.default.createElement(s.Tooltip,{placement:l(r.user._id)?"left":"right",title:i(r.createdTime)},o.default.createElement("span",{className:r.error?"item-message-content error":"item-message-content"},r.content))),r.files&&0!==r.files.length?o.default.createElement(s.Tooltip,{placement:l(r.user._id)?"left":"right",title:i(r.createdTime)},o.default.createElement("div",{className:"message-attachments"},(t=r.type,n=r.files,"image"===t?o.default.createElement(a.Fragment,null,n.map(function(e,t){return o.default.createElement("a",{key:t,href:e.originalSrc,"data-lity":!0},o.default.createElement("img",{onError:function(e){return e.target.src="/images/404.jpg"},src:e.thumbnailSrc,className:"message-attachments-item image"}))})):"video"===t?o.default.createElement(a.Fragment,null,n.map(function(e,t){return o.default.createElement("a",{key:t,style:{display:"inline-block",position:"relative",cursor:"pointer"},href:e.originalSrc,"data-lity":!0},o.default.createElement("img",{onError:function(e){return e.target.src="/images/404.jpg"},src:e.thumbnailSrc,style:{height:"50px",borderRadius:"5px"},className:"message-attachments-item video"}),o.default.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",background:"#fff",top:0,opacity:".3"}}),o.default.createElement(s.Icon,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"30px",color:"black"},type:"play-circle"}))})):"file"===t?o.default.createElement(a.Fragment,null,n.map(function(e,t){return o.default.createElement("a",{download:!0,key:t,href:e.originalSrc},o.default.createElement("i",{className:"fa fa-download","aria-hidden":"true"}))})):void 0))):null,o.default.createElement("div",{className:"member-readed-message"},u(r._id)&&function(e,t,n,r){var a="";if(e.memberReaded){var s=!0,i=!1,l=void 0;try{for(var u,c=e.memberReaded[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;d._id===e.user._id||r(d._id)||(a+=""===a?d.name:", "+d.name)}}catch(e){i=!0,l=e}finally{try{!s&&c.return&&c.return()}finally{if(i)throw l}}return""===a?null:2===n?t?o.default.createElement("small",null,o.default.createElement("i",{style:{color:"green"},className:"fa fa-check-circle-o","aria-hidden":"true"})," Đã xem"):null:o.default.createElement("small",null,o.default.createElement("i",{style:{color:"green"},className:"fa fa-check-circle-o","aria-hidden":"true"})," ",a," đã xem")}return null}(r,l(r.user._id),c,l))))}},1184:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),o=(r=a)&&r.__esModule?r:{default:r},s=n(80);t.default=function(e){var t=e.group,n=e.visible,r=e.actions,i=e.isLoading,l=e.newMemberIds,u=e.isAdmin,c=e.isMe;return o.default.createElement(s.Modal,{title:"Thành viên nhóm "+(t._id&&t.name),visible:n,onCancel:function(){return r.handleChangeStatusModal("listMembers")},footer:[o.default.createElement(s.Button,{key:"back",onClick:function(){return r.handleChangeStatusModal("listMembers")}},"Trở lại"),o.default.createElement(s.Button,{key:"submit",type:"primary",loading:i,onClick:r.handleAddNewMembers},"Thêm vào nhóm")]},t._id&&o.default.createElement(a.Fragment,null,t.members.map(function(e,n){return o.default.createElement("div",{className:"item-member-of-modal-members-group",key:e._id||n,onClick:function(){t.admin&&(u||c(e._id))&&r.confirmDeleteMember(e,c(e._id))},style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"5px"}},o.default.createElement("div",null,o.default.createElement("div",{style:{position:"relative",display:"inline-block"}},o.default.createElement("img",{src:e.avatar,style:{width:"30px",height:"30px",marginRight:"5px"}}),o.default.createElement("div",{style:(i=e.online,{width:"7px",position:"absolute",bottom:0,zIndex:1,transform:"translate(-50%, 50%)",height:"7px",border:"1px solid #fff",borderRadius:"50%",backgroundColor:i?"green":"red"})})),o.default.createElement("b",null,e.name)),t.admin&&o.default.createElement(a.Fragment,null,c(e._id)?o.default.createElement("a",{className:"button is-primary is-small"},"Rời nhóm"):u&&o.default.createElement(s.Icon,{type:"delete"})));var i})),o.default.createElement("textarea",{onChange:function(e){return r.handleChangeNewMemberIds(e.target.value)},value:l||"",className:"form-control",style:{marginTop:"15px"}}),o.default.createElement("small",null,"Nhập _id người dùng cách nhau bởi dấu , để thêm vào nhóm hoặc tạo nhóm mới",o.default.createElement("br",null),"VD: 123,321"))}},1188:function(e,t){},1190:function(e,t){},1225:function(e,t){},1226:function(e,t){},1285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=d(a),s=d(n(1286)),i=n(113),l=n(152),u=n(195),c=d(n(128));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.actions={handleLogout:function(){c.default.get("/api/v1/auth/logout"),r.props.handleLogOut(),r.props.setCurrentGroup({}),r.props.history.push("/auth/login")}},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this.props.auth;return o.default.createElement(s.default,{user:e?e.user:{},actions:this.actions})}}]),t}();t.default=(0,i.connect)(function(e){return{auth:e.auth}},{handleLogOut:l.handleLogOut,setCurrentGroup:u.setCurrentGroup})(p)},1286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.actions,n=e.user;return o.default.createElement("nav",{className:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0"},o.default.createElement("a",{className:"navbar-brand col-sm-3 col-md-2 mr-0",href:"#"},"Mesage"),o.default.createElement("ul",{className:"navbar-nav ml-auto px-3",style:{display:"flex",flexDirection:"row"}},o.default.createElement("li",{className:"nav-item",style:{marginRight:"15px"}},o.default.createElement("span",{className:"nav-link"},o.default.createElement("img",{src:n.avatar,style:{height:"20px"}})," ",n.name)),o.default.createElement("li",{className:"nav-item text-nowrap"},o.default.createElement("span",{style:{cursor:"pointer"},className:"nav-link",onClick:t.handleLogout},"Đăng xuất"))))}},1287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=l(a),s=n(594),i=l(n(1288));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){return o.default.createElement(a.Fragment,null,o.default.createElement(s.Switch,null,i.default.map(function(e,t){return o.default.createElement(s.Route,{key:t,exact:e.exact,path:e.path,component:e.component})})))}}]),t}();t.default=u},1288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1289)),a=o(n(1292));function o(e){return e&&e.__esModule?e:{default:e}}var s=[{path:"/auth/login",exact:!0,component:r.default},{path:"/auth/signup",component:a.default}];t.default=s},1289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=f(a),s=f(n(128)),i=f(n(1290)),l=n(80);n(534);var u=n(113),c=n(152),d=n(593);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var e,n,r,a,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,c=Array(u),f=0;f<u;f++)c[f]=arguments[f];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={auth:{email:null,password:null},loading:!1},r.pushNotifycation=function(e,t){l.notification[e]({message:t})},r.actions={handleChange:function(e){var t=e.target,n=t.id,a=t.value,o=r.state.auth;o[n]=a,r.setState({auth:o})},handleLogin:(a=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state.auth,r.setState({loading:!0}),e.next=4,s.default.post("/api/v1/auth/login",t).then(function(e){r.setState({loading:!1}),localStorage.tokenJWT=e.data.tokenJWT,(0,d.setAuthorizationHeader)(e.data.tokenJWT),r.props.setCurrentUser(e.data.tokenJWT),r.props.history.push("/")},function(e){var t="Đăng nhập không thành công";e.response.data.message&&(t=e.response.data.message),r.pushNotifycation("error",t),r.setState({loading:!1})}).catch(function(e){console.log(e),r.pushNotifycation("error","Đăng nhập không thành công"),r.setState({loading:!1})});case 4:case"end":return e.stop()}},e,i)}),o=function(){var e=a.apply(this,arguments);return new Promise(function(t,n){return function r(a,o){try{var s=e[a](o),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});t(i)}("next")})},function(){return o.apply(this,arguments)})},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this.state,t=e.auth,n=e.loading;return o.default.createElement(i.default,{actions:this.actions,loading:n,auth:t})}}]),t}();t.default=(0,u.connect)(null,{setCurrentUser:c.setCurrentUser})(m)},1290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.actions,n=e.auth,r=e.loading;return o.default.createElement("div",{className:"login-page"},o.default.createElement("form",{className:"form-login"},o.default.createElement("img",{className:"mb-4",src:"https://getbootstrap.com/docs/4.0/assets/brand/bootstrap-solid.svg",alt:"",width:"72",height:"72"}),o.default.createElement("h1",{className:"text-center h3 mb-3 font-weight-normal"},"Đăng nhập"),o.default.createElement("input",{value:n.email||"",style:{marginBottom:"5px"},id:"email",onChange:t.handleChange,type:"email",className:"form-control",placeholder:"Email",required:!0,autoFocus:!0}),o.default.createElement("input",{value:n.password||"",style:{marginBottom:"10px"},id:"password",onChange:t.handleChange,type:"password",className:"form-control",placeholder:"Mật khẩu",required:!0}),o.default.createElement("button",{disabled:r,onClick:t.handleLogin,className:"btn btn-lg btn-primary btn-block",type:"submit"},r&&o.default.createElement("i",{style:{marginRight:"5px"},className:"fa fa-circle-o-notch fa-spin","aria-hidden":"true"}),"Đăng nhập"),o.default.createElement("p",{className:"text-center mt-5 mb-3 text-muted"},"© 2019-2020")))}},1291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e?o.default.defaults.headers.common.Authorization="Bearer "+e:delete o.default.defaults.headers.common.Authorization};var r,a=n(128),o=(r=a)&&r.__esModule?r:{default:r}},1292:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),s=(r=o)&&r.__esModule?r:{default:r};var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"render",value:function(){return s.default.createElement("h1",null,"Signup")}}]),t}();t.default=i},1293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=function(t){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return t=r=u(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(o))),r.checkAuthenticate=function(){r.props.isAuthenticated||(r.props.handleLogOut(),r.props.history.push("/auth/login"))},u(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.Component),r(n,[{key:"componentDidMount",value:function(){this.checkAuthenticate()}},{key:"componentDidUpdate",value:function(){this.checkAuthenticate()}},{key:"render",value:function(){return this.props.isAuthenticated?s.default.createElement(e,this.props):null}}]),n}();return(0,i.connect)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},{handleLogOut:l.handleLogOut})(t)};var a,o=n(1),s=(a=o)&&a.__esModule?a:{default:a},i=n(113),l=n(152);function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}},1294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1295),s=(r=o)&&r.__esModule?r:{default:r},i=n(207);var l=("object"===("undefined"==typeof window?"undefined":a(window))&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):i.compose)(),u=(0,i.createStore)(s.default,l);t.default=u},1295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207),a=l(n(1296)),o=l(n(1297)),s=l(n(1298)),i=l(n(1299));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.combineReducers)({group:a.default,auth:o.default,groups:s.default,friends:i.default})},1296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{members:[]},t=arguments[1];switch(t.type){case"SET_CURRENT_GROUP":e=r({},t.payload.group);break;case"ADD_MEMBERS_CURRENT_GROUP":e=r({},e,{members:[].concat(a(e.members),a(t.members))});break;case"DELETE_MEMBER_CURRENT_GROUP":0===(e=r({},e,{members:[].concat(a(e.members)).filter(function(e){return e._id!==t.deleteMemberId})})).members.length&&(e={})}return e}},1297:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a={isAuthenticated:!1,user:{}};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n.type){case"AUTH_SET_CURRENT_USER":return{isAuthenticated:(e=n.user,!!e._id),user:n.user};case"AUTH_USER_LOG_OUT":return r({},t,{isAuthenticated:!1,user:{}});default:return t}}},1298:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){for(var n=-1,r=0;r<e.length;r++)if(e[r]._id===t){n=r;break}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"GROUPS_INIT_GROUPS":e=t.groups;break;case"GROUPS_UPDATE_GROUP":if(-1!==a(e,t.group._id))if(t.changePosition)e.splice(a(e,t.group._id),1),e=[t.group].concat(r(e));else{var n=[].concat(r(e));n[a(e,t.group._id)]=t.group,e=[].concat(r(n))}else e=[t.group].concat(r(e));break;case"GROUPS_UPDATE_GROUP_BY_ID":for(var o=0;o<e.length;o++)if(e[o]._id===t.groupId){e.splice(o,1),e=[t.group].concat(r(e));break}break;case"GROUPS_ADD_NEW_GROUP":0===e.length?e=[t.group]:(10===e.length&&e.splice(9,1),e=[t.group].concat(r(e)));break;case"GROUPS_DELETE_GROUP":-1!==a(e,t.groupId)&&(console.log("findIndexById(state, action.groupId) !== -1",-1!==a(e,t.groupId)),e=[].concat(r(e)).filter(function(e){return e._id!==t.groupId}))}return e}},1299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o={all:[],filter:null};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case"FRIENDS_INIT_FRIENDS_ALL":e=r({},e,{all:t.friends});break;case"FRIENDS_UPDATE_FRIEND":for(var n=-1,s=0;s<e.all.length;s++)if(e.all[s]._id===t.friend._id){n=s;break}-1!==n&&(e.all.splice(n,1),e=t.friend.online?r({},e,{all:[t.friend].concat(a(e.all))}):r({},e,{all:[].concat(a(e.all),[t.friend])}))}return e}},152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCurrentUser=function(e){var t={};e&&o.default.verify(e,"tobeornottobe",function(e,n){e||n&&(t={_id:n._id,username:n.username,avatar:n.avatar,name:n.name})});return{type:"AUTH_SET_CURRENT_USER",user:t}},t.handleLogOut=function(){return localStorage.removeItem("tokenJWT"),{type:"AUTH_USER_LOG_OUT"}};var r,a=n(1185),o=(r=a)&&r.__esModule?r:{default:r}},195:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCurrentGroup=function(e){return{type:"SET_CURRENT_GROUP",payload:{group:e}}},t.addMembersGroup=function(e){return{type:"ADD_MEMBERS_CURRENT_GROUP",members:e}},t.deleteMemberOfGroup=function(e){return{type:"DELETE_MEMBER_CURRENT_GROUP",deleteMemberId:e}}},540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initGroups=function(e){return{type:"GROUPS_INIT_GROUPS",groups:e}},t.handleAddNewGroup=function(e){return{type:"GROUPS_ADD_NEW_GROUP",group:e}},t.handleUpdateGroup=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:"GROUPS_UPDATE_GROUP",group:e,changePosition:t}},t.handleUpdateGroupById=function(e){return{type:"GROUPS_UPDATE_GROUP_BY_ID",groupId:e}},t.handleDeleteGroupById=function(e){return{type:"GROUPS_DELETE_GROUP",groupId:e}}},541:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initFriends=function(e){return{type:"FRIENDS_INIT_FRIENDS_ALL",friends:e}},t.updateFriend=function(e){return{type:"FRIENDS_UPDATE_FRIEND",friend:e}}},593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAuthorizationHeader=void 0;var r,a=n(1291),o=(r=a)&&r.__esModule?r:{default:r};t.setAuthorizationHeader=o.default},618:function(e,t,n){n(619),e.exports=n(820)},820:function(e,t,n){"use strict";var r=d(n(1)),a=d(n(8)),o=n(594),s=n(113),i=d(n(830)),l=n(593),u=n(152),c=d(n(1294));function d(e){return e&&e.__esModule?e:{default:e}}localStorage.tokenJWT?c.default.dispatch((0,u.setCurrentUser)(localStorage.tokenJWT)):c.default.dispatch((0,u.handleLogOut)()),(0,l.setAuthorizationHeader)(localStorage.tokenJWT),a.default.render(r.default.createElement(s.Provider,{store:c.default},r.default.createElement(o.BrowserRouter,null,r.default.createElement(o.Switch,null,i.default.map(function(e,t){return r.default.createElement(o.Route,{key:t,exact:e.exact,path:e.path,component:e.component})})))),document.getElementById("app"))},830:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(831)),a=o(n(1287));function o(e){return e&&e.__esModule?e:{default:e}}var s=[{path:"/",exact:!0,component:(0,o(n(1293)).default)(r.default)},{path:"/auth",component:a.default}];t.default=s},831:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=d(a),s=n(80);n(534);var i=d(n(1127)),l=d(n(1151)),u=d(n(1155)),c=d(n(1285));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.pushNotifycation=function(e,t){s.notification[e]({message:t})},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this.props.history;return o.default.createElement(a.Fragment,null,o.default.createElement(c.default,{history:e,pushNotifycation:this.pushNotifycation}),o.default.createElement("div",{className:"container-fluid"},o.default.createElement("div",{className:"row"},o.default.createElement(i.default,{pushNotifycation:this.pushNotifycation}),o.default.createElement(u.default,{history:e,pushNotifycation:this.pushNotifycation}),o.default.createElement(l.default,null))))}}]),t}();t.default=p},882:function(e,t,n){var r={"./af":355,"./af.js":355,"./ar":356,"./ar-dz":357,"./ar-dz.js":357,"./ar-kw":358,"./ar-kw.js":358,"./ar-ly":359,"./ar-ly.js":359,"./ar-ma":360,"./ar-ma.js":360,"./ar-sa":361,"./ar-sa.js":361,"./ar-tn":362,"./ar-tn.js":362,"./ar.js":356,"./az":363,"./az.js":363,"./be":364,"./be.js":364,"./bg":365,"./bg.js":365,"./bm":366,"./bm.js":366,"./bn":367,"./bn.js":367,"./bo":368,"./bo.js":368,"./br":369,"./br.js":369,"./bs":370,"./bs.js":370,"./ca":371,"./ca.js":371,"./cs":372,"./cs.js":372,"./cv":373,"./cv.js":373,"./cy":374,"./cy.js":374,"./da":375,"./da.js":375,"./de":376,"./de-at":377,"./de-at.js":377,"./de-ch":378,"./de-ch.js":378,"./de.js":376,"./dv":379,"./dv.js":379,"./el":380,"./el.js":380,"./en-au":381,"./en-au.js":381,"./en-ca":382,"./en-ca.js":382,"./en-gb":383,"./en-gb.js":383,"./en-ie":384,"./en-ie.js":384,"./en-il":385,"./en-il.js":385,"./en-nz":386,"./en-nz.js":386,"./eo":387,"./eo.js":387,"./es":388,"./es-do":389,"./es-do.js":389,"./es-us":390,"./es-us.js":390,"./es.js":388,"./et":391,"./et.js":391,"./eu":392,"./eu.js":392,"./fa":393,"./fa.js":393,"./fi":394,"./fi.js":394,"./fo":395,"./fo.js":395,"./fr":396,"./fr-ca":397,"./fr-ca.js":397,"./fr-ch":398,"./fr-ch.js":398,"./fr.js":396,"./fy":399,"./fy.js":399,"./gd":400,"./gd.js":400,"./gl":401,"./gl.js":401,"./gom-latn":402,"./gom-latn.js":402,"./gu":403,"./gu.js":403,"./he":404,"./he.js":404,"./hi":405,"./hi.js":405,"./hr":406,"./hr.js":406,"./hu":407,"./hu.js":407,"./hy-am":408,"./hy-am.js":408,"./id":409,"./id.js":409,"./is":410,"./is.js":410,"./it":411,"./it.js":411,"./ja":412,"./ja.js":412,"./jv":413,"./jv.js":413,"./ka":414,"./ka.js":414,"./kk":415,"./kk.js":415,"./km":416,"./km.js":416,"./kn":417,"./kn.js":417,"./ko":418,"./ko.js":418,"./ku":419,"./ku.js":419,"./ky":420,"./ky.js":420,"./lb":421,"./lb.js":421,"./lo":422,"./lo.js":422,"./lt":423,"./lt.js":423,"./lv":424,"./lv.js":424,"./me":425,"./me.js":425,"./mi":426,"./mi.js":426,"./mk":427,"./mk.js":427,"./ml":428,"./ml.js":428,"./mn":429,"./mn.js":429,"./mr":430,"./mr.js":430,"./ms":431,"./ms-my":432,"./ms-my.js":432,"./ms.js":431,"./mt":433,"./mt.js":433,"./my":434,"./my.js":434,"./nb":435,"./nb.js":435,"./ne":436,"./ne.js":436,"./nl":437,"./nl-be":438,"./nl-be.js":438,"./nl.js":437,"./nn":439,"./nn.js":439,"./pa-in":440,"./pa-in.js":440,"./pl":441,"./pl.js":441,"./pt":442,"./pt-br":443,"./pt-br.js":443,"./pt.js":442,"./ro":444,"./ro.js":444,"./ru":445,"./ru.js":445,"./sd":446,"./sd.js":446,"./se":447,"./se.js":447,"./si":448,"./si.js":448,"./sk":449,"./sk.js":449,"./sl":450,"./sl.js":450,"./sq":451,"./sq.js":451,"./sr":452,"./sr-cyrl":453,"./sr-cyrl.js":453,"./sr.js":452,"./ss":454,"./ss.js":454,"./sv":455,"./sv.js":455,"./sw":456,"./sw.js":456,"./ta":457,"./ta.js":457,"./te":458,"./te.js":458,"./tet":459,"./tet.js":459,"./tg":460,"./tg.js":460,"./th":461,"./th.js":461,"./tl-ph":462,"./tl-ph.js":462,"./tlh":463,"./tlh.js":463,"./tr":464,"./tr.js":464,"./tzl":465,"./tzl.js":465,"./tzm":466,"./tzm-latn":467,"./tzm-latn.js":467,"./tzm.js":466,"./ug-cn":468,"./ug-cn.js":468,"./uk":469,"./uk.js":469,"./ur":470,"./ur.js":470,"./uz":471,"./uz-latn":472,"./uz-latn.js":472,"./uz.js":471,"./vi":473,"./vi.js":473,"./x-pseudo":474,"./x-pseudo.js":474,"./yo":475,"./yo.js":475,"./zh-cn":476,"./zh-cn.js":476,"./zh-hk":477,"./zh-hk.js":477,"./zh-tw":478,"./zh-tw.js":478};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=882}},[[618,1,2]]]);